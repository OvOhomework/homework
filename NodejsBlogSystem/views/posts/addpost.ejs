<!--
 * @Author: your name
 * @Date: 2021-12-12 17:04:44
 * @LastEditTime: 2021-12-26 20:22:28
 * @LastEditors: your name
 * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
 * @FilePath: \work\NodejsBlogSystem\views\posts\addpost.ejs
-->
<%- include('../partials/_header.ejs') %>
<%- include('../partials/_navbar.ejs') %>

<main>
    <%- include('../partials/_messages.ejs') %>
    <video src="https://img-baofun.zhhainiao.com/fs/scene/preview_video/4bf2316fb03d5abc22715071bdde44e4_preview.mp4" style="width: 100%;height: 100%;object-fit: cover;position: fixed;top: 0;left: 0; z-index:-999;" autoplay="autoplay" loop="loop" muted="muted"  background-attachment="scroll"></video>
    <h1 class="mt-5 px-5"> Add New Post </h1>
    <form action="/posts/add" method="post" class="border border-light p-5">
        <div class="form-group">
            <label for="title">Title</label>
            <input name="title" type="text" class="form-control"
                value="<%= typeof (title) != 'undefined' ? title : '' %>" required>
        </div>


        <div class="form-group">
            <label>Category</label>
            <select name="category" class="browser-default custom-select" required>
                <% categories.forEach(category => { %>
                <% if(category._id === posts.category) { %>
                <option selected label="<%= category.cname %>" value=" <%= category._id %> "></option>
                <% } else { %>
                <option label="<%= category.cname %> " value="<%= category._id %>"></option>
                <% } %>
                <%  });    %>
            </select>
        </div>




        <div class="form-group">
            <label for="author">Author</label>
            <input name="author" type="text" class="form-control"
                value="<%= typeof (author) != 'undefined' ? author : '' %>" required>
        </div>

        <div class="form-group">
            <label for="body">Body</label>
            <textarea name="body" class="form-control rounded-0" id="body" rows="3"
                required><%= typeof (body) != 'undefined' ?body : '' %></textarea>
        </div>

        <label>Main Image(Thumbnail)</label>
        <input type="file" name="mainImage" class="filepond" accept="image/png, image/jpeg, image/gif">
        </div>  

        <button type="submit" class="create-post btn btn-dark">Publish</button>

    </form>

</main>


<%- include('../partials/_footer.ejs') %>